{% extends "base.html" %}

{% block content %}
{% set index = get_section(path="_index.md") %}
{% set image_pages = [] %}
{% for subsection_path in index.subsections %}
  {% set subsection = get_section(path=subsection_path) %}
  {% for page in subsection.pages %}
    {% if page.extra %}
      {% if page.extra.images %}
        {% set_global image_pages = image_pages | concat(with=page) %}
      {% endif %}
    {% endif %}
  {% endfor %}
{% endfor %}
<div id="carousel">
  <div class="carousel-inner">
    {% for page in image_pages %}
      {% set image = page.extra.images | first %}
      <div class="carousel-item d-flex">
        <a href="{{ page.path | safe }}">
          <figure>
            <img src="{{ page.path | safe }}{{ image }}" alt="{{ image }}">
          </figure>
        </a>
      </div>
    {% endfor %}
  </div>
</div>
{% endblock content %}